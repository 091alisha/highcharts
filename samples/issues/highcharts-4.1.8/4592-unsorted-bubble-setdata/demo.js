
$(function () {
    QUnit.test('Bubble setting data and extremes cause min > max.', function (assert) {
        var chart = $('#container').highcharts({
            chart: {
                type: 'bubble'
            },
            xAxis: {
                max: 1442590226916,
                type: 'datetime',
                min: 1442590226916 - 1000 * 60 * 5
            },
            series: [{
                data: [
                    [1442590200000, 5.709848078964569, 14],
                    [1442590140000, 5.20008059867223, 14],
                    [1442590080000, 5.757253368616148, 13],
                    [1442590020000, 5.865987187890823, 10],
                    [1442589960000, 5.184852417565708, 12],
                    [1442589900000, 5.097934492965578, 7]
                ]
            }]
        }).highcharts();

        chart.series[0].setData([
            [1442590200000, 5.670368266409241, 5],
            [1442590140000, 5.8784015711680695, 14],
            [1442590080000, 5.025081204432354, 6],
            [1442590020000, 5.772096629523503, 9],
            [1442589960000, 5.556385360559943, 9],
            [1442589900000, 5.7959582482944825, 7]
        ], false);
        chart.xAxis[0].setExtremes(1442590226916 - 1000 * 60 * 5 + 5, 1442590226916, false);
        chart.redraw();

        chart.series[0].setData([
            [1442590200000, 5.4260663631694115, 10],
            [1442590140000, 5.4855138939165045, 5],
            [1442590080000, 5.180941067909771, 13],
            [1442590020000, 5.353340247702363, 11],
            [1442589960000, 5.020590646109667, 9],
            [1442589900000, 5.9589856190978026, 6]
        ], false);
        chart.xAxis[0].setExtremes(1442590226916 - 1000 * 60 * 5 + 5, 1442590226916, false);
        chart.redraw();

        assert.strictEqual(
            isNaN(chart.series[0].points[0].plotY),
            false,
            "Proper points' positions."
        );
    });
});